<h2>Users of the application</h2>

<table class="table">
  <thead>
    <tr>
      <th>Username</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="user in users">
      <td>
        <span ng-if="editEntry !== user.id">{{user.username}}</span>
        <span ng-if="editEntry === user.id"><input type="text" ng-model="user.username"></span>
      </td>
      <td>
        <span ng-if="editEntry !== user.id">{{user.firstName}}</span>
        <span ng-if="editEntry === user.id"><input type="text" ng-model="user.firstName"></span>
      </td>
      <td>
        <span ng-if="editEntry !== user.id">{{user.lastName}}</span>
        <span ng-if="editEntry === user.id"><input type="text" ng-model="user.lastName"></span>
      </td>
      <td>
        <span ng-if="editEntry !== user.id || viewerData.role === 2">{{roles[user.role]}}</span>
        <span ng-if="editEntry === user.id && viewerData.role === 3" convert-to-number>
          <select ng-model="user.role">
            <option value="1">user</option>
            <option value="2">manager</option>
            <option value="3">admin</option>
          </select>
        </span>
      </td>
      <td>
        <div ng-if="editEntry !== user.id">
          <button class="btn btn-primary" ng-click="startEditing(user.id)">Edit</button>
        </div>
        <div ng-if="editEntry === user.id">
          <button class="btn btn-primary" ng-click="submitUpdatedUser(user.id, user.username, user.firstName, user.lastName, user.role)">Update</button>
          <button class="btn btn-danger" ng-click="deleteUser(user.id)">Delete</button>
          <button class="btn btn-default" ng-click="stopEditing()">Cancel</button>
        </div>
      </td>
    </tr>
  </tbody>
</table>
